# Backtracking

#### Backtracking Templates, Backtracking == DFS on a tree
```js
function dfs(startIndex, path, res, [...additional states]) {
    if (isLeaf(path)) {
        res.push(new Array(path));
        return;
    }
    for (const edge of getEdges(startIndex, [...additional states])) {
        path.push(edge);
        if (...additionl statees) update(...additional states)
        dfs(startIndex + edge.length, path, res, [...addtional states]);
        path.pop();
        // revert(...additional states) if necessary, e.g. permutations
    }
}
```

#### DFS with States
Given a ternary tree (each node of the tree has at most three children), find all root-to-leaf paths.
```js
class Node {
    constructor(val, children = []) {
        this.val = val;
        this.children = children;
    }
}

function ternaryTreePaths(root) {
      let path = [];
      dfs(root, [], path);
      return path;
}

function dfs(root, res, path) {
  res.push(root.val);

  for (let node of root.children) {
    if (node.children.length === 0) {
      res.push(node.val);
      path.push(res.join("->"));
      res.pop();
      continue;
    }

    dfs(node, res, path);
    res.pop();
  }
}
```

#### Find all n-letter words composed by 'a' and 'b', return them in a list of strings in lexicographical order.
Input: 2
<br />
Output: ["aa", "ab", "ba", "bb"]

```js
function letterCombination(n) {
  let res = [];

  function dfs(path) {
    if (path.length === n) {
      res.push(path.join(""));
      return;
    }

    for (let char of "ab") {
      path.push(char);
      dfs(path);
      path.pop();
    }
  }

  dfs([]);
  return res;
}
```

#### Generate All Letter Combinations from a Phone Number
Input: "56"
<br />
Output:["jm","jn","jo","km","kn","ko","lm","ln","lo"]

```js
function letterCombinationsOfPhoneNumber(digits) {
    let res = [];
    dfs(digits, 0, [], res);
    return res;
}

function dfs(digits, i, path, res) {
    if(i === digits.length) {
        res.push(path.join(''));
        return;
    }

    for(const char of KEYBOARD[digits[i]]) {
        path.push(char);
        dfs(digits, i+1, path, res);
        path.pop();
    }
}

const KEYBOARD = {
  '2': 'abc',
  '3': 'def',
  '4': 'ghi',
  '5': 'jkl',
  '6': 'mno',
  '7': 'pqrs',
  '8': 'tuv',
  '9': 'wxyz',
};
```